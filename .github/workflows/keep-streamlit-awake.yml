name: Keep Streamlit App Awake

on:
  schedule:
    - cron: "*/30 * * * *"  # every 30 min (UTC; GitHub min ~5 min interval) [web:22]
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Big Mac Index app
        run: |
          URL="https://bigmacindexlfc.streamlit.app/"
          echo "Pinging $URL"
          curl -L --max-redirs 10 --silent --max-time 30 \
            -H "User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36" \
            -H "Accept: text/html,application/xhtml+xml" \
            --write-out "HTTP %{http_code}" --output /dev/null "$URL"
          echo "Ping completed (redirects handled)"
