name: Keep Streamlit App Awake

on:
  schedule:
    - cron: "*/30 * * * *"  # every 30 min (UTC; GitHub min ~5 min interval) [web:22]
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Big Mac Index app
        run: |
          URL="https://bigmacindexlfc.streamlit.app/"
          echo "Pinging $URL"
          if ! curl -L --fail --silent --show-error --max-time 30 "$URL" > /dev/null; then
            echo "Ping FAILED - app may be asleep or unreachable"
            exit 1
          fi
          echo "Ping succeeded (HTTP 2xx/3xx)"
